import sys

# This program will take the final output of the InputDataClient and will output a file with the instructions to the DHT to get a specific degradation level.

def checkentryInt(var,levelavailable):
   try:
      if(int(var)>0 and int(var)<=levelavailable):
         return int(var)
      else:
         print "Incorrect entry, please retype it."
         var = raw_input()
         var = checkentryInt(var,levelavailable)
         return var
   except:
      print "Incorrect entry, please retype it."
      var = raw_input()
      var = checkentryInt(var,levelavailable)
      return var

def main(PathtoInputFile,PathToOutputFile):
   privateInstructions = open(PathtoInputFile) 
   levelavailable = 0
   for line in privateInstructions:
      if("*************" in line):
         levelavailable += 1 
   privateInstructions.close()
   privateInstructions = open(PathtoInputFile)
   print "Which privacy level would you send ? (1 is the most private level, there are "+ str(levelavailable)+" privacy level available."
   levelTosend = raw_input()
   levelTosend = checkentryInt(levelTosend,levelavailable)
   OutputFile = open(PathToOutputFile,'w')
   currentlevel = 1
   for line in privateInstructions:
      if("*************" in line):
            currentlevel+=1
      else:
         if(currentlevel == levelTosend):
            OutputFile.write(line)
   print "The instructions to get the privacy level "+str(levelTosend)+" of your data are available at " +str(PathToOutputFile)+ " ."
   privateInstructions.close()
   OutputFile.close()

         

      




if __name__=='__main__':
   sys.exit(main(sys.argv[1],sys.argv[2]))
